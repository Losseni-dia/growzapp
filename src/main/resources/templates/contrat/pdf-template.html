<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <title>GrowzApp Contract</title>
    <style>
        @page {
            size: A4;
            margin: 0;
        }

        body {
            font-family: 'Helvetica', 'Arial', sans-serif;
            font-size: 10pt;
            color: #333;
            line-height: 1.3;
            margin: 0;
            padding: 0;
        }

        .header-bg {
            background-color: #1B5E20;
            height: 32mm;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .main-container {
            padding: 10mm 12mm 5mm 12mm;
        }

        table.layout {
            width: 100%;
            border-collapse: collapse;
        }

        td {
            vertical-align: top;
        }

        .header-title {
            color: #ffffff;
            font-size: 22pt;
            font-weight: bold;
            text-transform: uppercase;
            padding-top: 5mm;
        }

        .header-subtitle {
            color: #FFC107;
            font-size: 11pt;
            font-weight: bold;
            margin-top: 2px;
        }

        .ref-box {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 8px;
            border-radius: 4px;
            text-align: right;
            font-size: 8pt;
        }

        h2 {
            color: #1B5E20;
            border-bottom: 2px solid #1B5E20;
            padding-bottom: 2px;
            margin-top: 15px;
            margin-bottom: 10px;
            font-size: 13pt;
            text-transform: uppercase;
        }

        h3 {
            color: #2E7D32;
            font-size: 10pt;
            margin-bottom: 5px;
            margin-top: 5px;
        }

        .summary-box {
            background-color: #f1f8e9;
            border: 1px solid #c5e1a5;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 10px;
        }

        .summary-table td {
            padding: 3px 5px;
            border-bottom: 1px solid #e0e0e0;
            font-size: 9pt;
        }

        .summary-table tr:last-child td {
            border-bottom: none;
        }

        .label {
            font-weight: bold;
            color: #558b2f;
            width: 40%;
        }

        .value {
            font-weight: bold;
            color: #333;
            text-align: right;
        }

        .highlight-value {
            color: #1B5E20;
            font-size: 24pt;
            font-weight: 900;
        }

        .terms ul {
            list-style-type: none;
            padding-left: 0;
            margin: 0;
        }

        .terms li {
            margin-bottom: 6px;
            padding-left: 18px;
            position: relative;
            text-align: justify;
            font-size: 9pt;
        }

        .terms li::before {
            content: "\2714";
            color: #FFC107;
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .signature-area {
            margin-top: 20px;
            background-color: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 10px;
        }

        .signature-box {
            text-align: center;
            padding: 5px;
        }

        .sign-title {
            font-weight: bold;
            color: #1B5E20;
            margin-bottom: 25px;
            text-transform: uppercase;
            font-size: 9pt;
        }

        .sign-line {
            border-top: 1px solid #ccc;
            width: 80%;
            margin: 0 auto 5px auto;
        }

        .digital-stamp {
            border: 2px solid #4CAF50;
            color: #4CAF50;
            border-radius: 4px;
            display: inline-block;
            padding: 3px 8px;
            font-size: 7pt;
            font-weight: bold;
            transform: rotate(-5deg);
            margin-top: -20px;
            background: #ffffff;
        }

        .footer {
            position: fixed;
            bottom: 5mm;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 7pt;
            color: #777;
            border-top: 1px solid #eee;
            padding-top: 5px;
        }

        .qr-container {
            text-align: center;
            margin-top: 5px;
        }
    </style>
</head>

<body>

    <div class="header-bg"></div>

    <div class="main-container">

        <table class="layout">
            <tr>
                <td style="width: 65%;">
                    <div class="header-title" th:utext="#{pdf.header.title}">CONTRAT<br />D'INVESTISSEMENT</div>
                    <div class="header-subtitle" th:text="#{pdf.header.subtitle}">PARTICIPATION AGRICOLE DURABLE</div>
                </td>
                <td style="width: 35%; padding-top: 10mm;">
                    <div class="ref-box">
                        <strong th:text="#{pdf.ref.label} + ' :'">RÃ‰FÃ‰RENCE :</strong> <span
                            th:text="${numeroContrat}">CTR-001</span><br />
                        <strong th:text="#{pdf.date.label} + ' :'">DATE :</strong> <span
                            th:text="${contrat != null ? #temporals.format(contrat.dateGeneration, 'dd/MM/yyyy') : #temporals.format(#temporals.createNow(), 'dd/MM/yyyy')}">12/12/2025</span>
                    </div>
                </td>
            </tr>
        </table>

        <div style="height: 15px;"></div>

        <p style="margin-bottom: 10px;" th:text="#{pdf.intro.text}">
            Le prÃ©sent contrat formalise l'accord...
        </p>

        <table class="layout">
            <tr>
                <td style="width: 48%; padding-right: 1%;">
                    <div class="summary-box">
                        <h3 th:text="'ðŸ‘¤ ' + #{pdf.section.investor}">ðŸ‘¤ L'INVESTISSEUR</h3>
                        <table class="layout summary-table">
                            <tr>
                                <td class="label" th:text="#{pdf.label.fullname}">Nom complet</td>
                                <td class="value"
                                    th:text="${investissement.investisseur.prenom + ' ' + investissement.investisseur.nom}">
                                    Jean Dupont</td>
                            </tr>
                            <tr>
                                <td class="label" th:text="#{pdf.label.email}">Email</td>
                                <td class="value" th:text="${investissement.investisseur.email}">jean@mail.com</td>
                            </tr>
                            <tr>
                                <td class="label" th:text="#{pdf.label.account_id}">ID Compte</td>
                                <td class="value" th:text="${'USR-' + investissement.investisseur.id}">USR-123</td>
                            </tr>
                        </table>
                    </div>

                    <div class="summary-box">
                        <h3 th:text="'ðŸŒ± ' + #{pdf.section.project}">ðŸŒ± LE PROJET</h3>
                        <table class="layout summary-table">
                            <tr>
                                <td class="label" th:text="#{pdf.label.project_name}">LibellÃ©</td>
                                <td class="value" th:text="${investissement.projet.libelle}">Ferme Solaire</td>
                            </tr>
                            <tr>
                                <td class="label" th:text="#{pdf.label.duration}">DurÃ©e</td>
                                <td class="value"><span th:text="${investissement.projet.dureeMois}">36</span> <span
                                        th:text="#{pdf.unit.months}">mois</span></td>
                            </tr>
                            <tr>
                                <td class="label" th:text="#{pdf.label.location}">Localisation</td>
                                <td class="value">
                                    <span
                                        th:text="${investissement.projet.siteProjet?.localite?.nom ?: #messages.msg('pdf.value.unspecified')}">Abidjan</span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>

                <td style="width: 48%; padding-left: 1%;">
                    <div class="summary-box" style="background-color: #fffde7; border-color: #ffe082; height: 100%;">
                        <h3 style="color: #f57f17; text-align: center; margin-top:0;"
                            th:text="#{pdf.section.financial}">DÃ‰TAILS FINANCIERS</h3>

                        <div style="text-align: center; margin: 10px 0;">
                            <div style="font-size: 8pt; color: #666; text-transform: uppercase; letter-spacing: 1px;"
                                th:text="#{pdf.label.invested_amount}">
                                Montant Investi</div>
                            <div class="highlight-value">
                                <span
                                    th:text="${#numbers.formatDecimal(investissement.montantInvesti, 0, 'DEFAULT', 0, 'DEFAULT')}">500
                                    000</span>
                                <span style="font-size: 14pt;">FCFA</span>
                            </div>
                        </div>

                        <table class="layout summary-table">
                            <tr>
                                <td class="label" th:text="#{pdf.label.shares_count}">Nombre de parts</td>
                                <td class="value" th:text="${investissement.nombrePartsPris}">100</td>
                            </tr>
                            <tr>
                                <td class="label" th:text="#{pdf.label.unit_price}">Prix unitaire</td>
                                <td class="value"
                                    th:text="${#numbers.formatDecimal(investissement.projet.prixUnePart, 0, 'DEFAULT', 0, 'DEFAULT') + ' FCFA'}">
                                    5000 FCFA</td>
                            </tr>
                            <tr>
                                <td class="label" th:text="#{pdf.label.equity}">Ã‰quitÃ© acquise</td>
                                <td class="value" th:text="${investissement.valeurPartsPrisEnPourcent + ' %'}">2.5 %
                                </td>
                            </tr>
                            <tr>
                                <td class="label" th:text="#{pdf.label.status}">Statut</td>
                                <td class="value" style="color: #2E7D32; text-transform: uppercase;"
                                    th:text="#{pdf.status.paid}">VALIDÃ‰ &amp; PAYÃ‰</td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>
        </table>

        <h2 th:text="#{pdf.terms.title}">CONDITIONS GÃ‰NÃ‰RALES</h2>
        <div class="terms">
            <ul>
                <li th:utext="#{pdf.term.1}"><strong>PropriÃ©tÃ©...</strong></li>
                <li th:utext="#{pdf.term.2}"><strong>Blocage...</strong></li>
                <li th:utext="#{pdf.term.3}"><strong>Dividendes...</strong></li>
                <li th:utext="#{pdf.term.4}"><strong>LiquiditÃ©...</strong></li>
                <li th:utext="#{pdf.term.5}"><strong>Loi...</strong></li>
            </ul>
        </div>

        <div class="signature-area">
            <table class="layout">
                <tr>
                    <td class="signature-box" style="width: 33%;">
                        <div class="sign-title" th:text="#{pdf.sign.investor}">L'INVESTISSEUR</div>
                        <div style="height: 30px;"></div>
                        <div class="digital-stamp" th:text="#{pdf.sign.stamp_digital}">SIGNÃ‰ NUMÃ‰RIQUEMENT</div>
                        <div class="sign-line"></div>
                        <div style="font-size: 8pt;"
                            th:text="${investissement.investisseur.prenom + ' ' + investissement.investisseur.nom}">Nom
                        </div>
                    </td>

                    <td style="width: 33%; text-align: center; vertical-align: middle;">
                        <div class="qr-container">
                            <img th:if="${qrCodeBase64 != null}" th:src="@{'data:image/png;base64,' + ${qrCodeBase64}}"
                                width="90" height="90" alt="QR Code" />
                            <div style="font-size: 6pt; color: #999; margin-top: 2px;" th:text="#{pdf.qr.scan}">Scannez
                                pour vÃ©rifier</div>
                        </div>
                    </td>

                    <td class="signature-box" style="width: 33%;">
                        <div class="sign-title" th:text="#{pdf.sign.company}">POUR GROWZAPP</div>
                        <div style="height: 30px;"></div>
                        <div class="digital-stamp" style="border-color: #1B5E20; color: #1B5E20;"
                            th:text="#{pdf.sign.stamp_certified}">CERTIFIÃ‰ CONFORME</div>
                        <div class="sign-line"></div>
                        <div style="font-size: 8pt;" th:text="#{pdf.sign.management}">La Direction</div>
                    </td>
                </tr>
            </table>
        </div>

    </div>

    <div class="footer">
        GrowzApp S.A.R.L - Abidjan, CÃ´te d'Ivoire - RC: CI-ABJ-2025-B-12345<br />
        <span th:text="#{pdf.footer.notice}">Ce document est une preuve...</span>
        <span th:text="#{pdf.footer.page}">Page</span> <span style="font-weight: bold;">1/1</span>
    </div>

</body>

</html>